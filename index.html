<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
	<head>
		<title>Poll Tracking</title>
		<meta charset="utf-8">
		<script type="text/javascript" src="static/jquery-3.2.1.js"></script>
		<script type="text/javascript" src="static/d3-4.12.0.js"></script>
		<script type="text/javascript" src="lib/data_utils.js"></script>

		<link rel="stylesheet" type="text/css" href="static/style.css">
	</head>
	
	<body>
		<script>

		
		var margin = {top: 20, right: 50, bottom: 30, left: 50},
			width = 960 - margin.left - margin.right,
			height = 500 - margin.top - margin.bottom;
		
		var svg = d3.select("body").append("svg")
			.attr("width", width + margin.left + margin.right)
			.attr("height", height + margin.top + margin.bottom)
			.append("g")
			.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
		var x = d3.scaleTime().range([0, width]);
		var y = d3.scaleLinear().range([height, 0]);

		var xAxis = d3.axisBottom(x);
		var yAxis = d3.axisLeft(y);

		var brush = d3.brushX()
			.extent([[0, 0], [width, height]])
			.on("brush end", brushed);
		var brushed;
		
		var min_rating = 100;
		var max_rating = 0;

		d3.csv("https://projects.fivethirtyeight.com/trump-approval-data/approval_polllist.csv", data_utils.parseRow, function(error, data) {
			if (error) {
				throw error;
			}
			console.log(data);
			x.domain(d3.extent(data, function(d) { return data.length; }));
			y.domain([min_rating - 10, max_rating + 10]);
			/* data.sort(function(a, b) {
			   return a.enddate - b.enddate;
			   });
			   console.log(data[0]);
			   x.domain([data[0].enddate, data[data.length - 1].enddate]);
			   y.domain([min_rating - 10, max_rating + 10]); */

			
		});
		</script>
		
	</body>
</html>
